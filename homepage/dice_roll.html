<!DOCTYPE html>

<html lang="en">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link href="styles.css" rel="stylesheet">
        <title>My CS50 WebPage</title>


      <script>
        document.addEventListener('DOMContentLoaded', function(){


          let rolls = document.querySelectorAll('.diceRolls');

          function randomNumber(){
            min = Math.ceil(1)
            max = Math.floor(7);
            return Math.floor(Math.random() * (max - min) + min);
          };

          function showDice(){
            for (let i = 0; i < rolls.length; i++){
              let randomN = randomNumber();
              if ((i + 1) % 5 != 0){
              rolls[i].innerHTML = randomN;
              }
              else{
                let sRoll = 6;
                console.log(sRoll)
                for (j = 0; j < 4; j++){
                  if (parseInt(rolls[i - j].innerHTML) < sRoll){
                    sRoll = (parseInt(rolls[i - j].innerHTML));
                    console.log(sRoll)
                    console.log(j)
                  };
                };
                rolls[i].innerHTML = parseInt(rolls[i - 1].innerHTML) + parseInt(rolls[i - 2].innerHTML) + parseInt(rolls[i - 3].innerHTML) + parseInt(rolls[i - 4].innerHTML) - parseInt(sRoll);
              }
            };
          };


          let rollButton = document.getElementById('rollButton');
          rollButton.addEventListener('click', showDice);

        });
      </script>
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About Me</a></li>
                <li><a href="dice_roll.html">DnD Char Dice Roll</a></li>
                <li><a href="boot.html">Bootstrap!</a></li>
            </ul>
        </nav>

        <h1>Let's roll some die and try to find the stats of your next character</h1>

        <div id="char_table">
        <table>
            <thead>
              <tr>
                <th>Rolls</th>
                <th>First Rolls</th>
                <th>Second Rolls</th>
                <th>Third Rolls</th>
                <th>Forth Rolls</th>
                <th>Final Result (Sum of the 3 biggest numbers)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Strength</td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
              </tr>
              <tr>
                <td>Dexterity</td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
              </tr>
              <tr>
                <td>Constitution</td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
              </tr>
              <tr>
                <td>Wisdom</td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls" ></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
              </tr>
              <tr>
                <td>Charisma</td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
              </tr>
              <tr>
                <td>Intelligence</td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
                <td class="diceRolls"></td>
              </tr>
            </tbody>
          </table>

          <button id="rollButton">ROLL!</button>
        </div>

    </body>
</html>